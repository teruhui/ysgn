{
  "version": "20251018",
  "author": "ysgn",
  "name": "视界星历",
  "description": "聚合电影/电视剧/动漫资源，显示更新日期、年份、热度，支持分类筛选",
  "icon": "https://picsum.photos/200/200?random=5",
  "group": "影视",
  "rules": [
    {
      "name": "电影·本周热榜",
      "group": "电影",
      "url": "https://movie.douban.com/chart",
      "update_date": "#update_date#",
      "year": "#year#",
      "hot": "#hot#",
      "parser": "js: function() { \n  const items = document.querySelectorAll('.article .pl2'); \n  const result = []; \n  items.forEach(item => { \n    // 提取标题与链接 \n    const title = item.querySelector('a').textContent.replace(/\\s+/g, ' ').trim(); \n    const url = item.querySelector('a').href; \n    // 提取年份（匹配标题中的4位数字） \n    const year = /(\\d{4})/.exec(title) ? /(\\d{4})/.exec(title)[1] : '未知'; \n    // 提取热度（用豆瓣评分换算为0-100分，评分*10） \n    const score = item.querySelector('.rating_nums')?.textContent || '0'; \n    const hot = Math.floor(parseFloat(score) * 10); \n    // 提取更新日期（取当前页面更新时间，实际可对接站点接口） \n    const updateDate = document.querySelector('.updatetime')?.textContent.replace('更新于 ', '') || new Date().toLocaleDateString(); \n    result.push({ title, url, update_date: updateDate, year, hot }); \n  }); \n  return result; \n}"
    },
    {
      "name": "电视剧·最新更新",
      "group": "电视剧",
      "url": "https://www.rrys2020.com/tv",
      "update_date": "#update_date#",
      "year": "#year#",
      "hot": "#hot#",
      "parser": "js: function() { \n  const items = document.querySelectorAll('.box_bd .row'); \n  const result = []; \n  items.forEach(item => { \n    const title = item.querySelector('.name a').textContent.trim(); \n    const url = 'https://www.rrys2020.com' + item.querySelector('.name a').href; \n    // 提取更新日期（站点明确标注的更新时间） \n    const updateDate = item.querySelector('.update_time').textContent.replace('更新时间：', '').trim(); \n    // 提取年份（从简介中匹配） \n    const intro = item.querySelector('.intro')?.textContent || ''; \n    const year = /(\\d{4})年/.exec(intro) ? /(\\d{4})年/.exec(intro)[1] : '未知'; \n    // 提取热度（用站点人气值换算，取前两位数字） \n    const popularity = item.querySelector('.hot')?.textContent || '0'; \n    const hot = Math.min(parseInt(popularity.slice(0, 2)), 100); \n    result.push({ title, url, update_date: updateDate, year, hot }); \n  }); \n  return result; \n}"
    },
    {
      "name": "动漫·连载中",
      "group": "动漫",
      "url": "https://www.bilibili.com/anime/index/#/bangumi",
      "update_date": "#update_date#",
      "year": "#year#",
      "hot": "#hot#",
      "parser": "js: function() { \n  const items = document.querySelectorAll('.bangumi-item'); \n  const result = []; \n  items.forEach(item => { \n    const title = item.querySelector('.title').textContent.trim(); \n    const url = 'https://www.bilibili.com' + item.querySelector('a').href; \n    // 提取更新日期（连载状态+最近更新时间） \n    const updateStatus = item.querySelector('.status').textContent.trim(); \n    const updateDate = updateStatus.includes('更新至') ? updateStatus + '（' + new Date().toLocaleDateString() + '）' : '待更新'; \n    // 提取年份（从标题或标签中匹配） \n    const year = /(\\d{4})/.exec(title) ? /(\\d{4})/.exec(title)[1] : new Date().getFullYear().toString(); \n    // 提取热度（用播放量换算，1000万播放=100分） \n    const playCount = item.querySelector('.play').textContent || '0'; \n    const hot = playCount.includes('万') ? Math.min(Math.floor(parseFloat(playCount) * 10), 100) : Math.min(parseInt(playCount)/100000, 100); \n    result.push({ title, url, update_date: updateDate, year, hot }); \n  }); \n  return result; \n}"
    }
  ]
}
